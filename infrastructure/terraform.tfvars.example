# ==============================================================================
# EXAMPLE CONFIGURATION FOR RENTPATH INFRASTRUCTURE
# ==============================================================================

# Project Configuration
project_name = "rentpath"
environment  = "production"  # dev, test, staging, production
aws_region   = "eu-central-1"

# Network Configuration
# Replace with your actual VPC and subnet IDs
vpc_id = "vpc-xxxxxxxxx"
public_subnet_ids = [
  "subnet-xxxxxxxxx",  # AZ-a
  "subnet-xxxxxxxxx",  # AZ-b
  "subnet-xxxxxxxxx"   # AZ-c
]
private_subnet_ids = [
  "subnet-xxxxxxxxx",  # AZ-a
  "subnet-xxxxxxxxx",  # AZ-b
  "subnet-xxxxxxxxx"   # AZ-c
]

# Elastic Beanstalk Configuration
eb_solution_stack = "64bit Amazon Linux 2023 v4.7.5 running PHP 8.3"
eb_instance_type  = "t3.medium"  # t3.micro for dev, t3.medium+ for production
eb_min_size       = 1
eb_max_size       = 5            # Adjust based on expected load

# Application Configuration
app_debug = "false"  # Set to "true" for development environments

# Database Configuration
rds_engine                  = "mysql"
rds_engine_version          = "8.0"
rds_instance_class          = "db.t3.micro"    # db.t3.micro for dev, larger for production
db_allocated_storage        = 20               # GB
db_max_allocated_storage    = 100              # GB (auto-scaling limit)
rds_backup_retention_period = 7                # Days
rds_multi_az                = false            # Set to true for production HA
rds_deletion_protection     = true             # Set to false for dev environments

# S3 Configuration
s3_versioning_enabled   = true
s3_create_backup_bucket = true

# CodePipeline Configuration
github_repo   = "your-username/your-repo"  # Format: owner/repository
github_branch = "main"                     # Branch to deploy from

# Laravel Application Configuration (Non-Sensitive)
# These values are injected as environment variables into Elastic Beanstalk
eb_laravel_config = {
  # Application Configuration
  app_name                = "RentPath"
  app_env                 = "production"
  app_locale              = "en"
  app_fallback_locale     = "en"
  app_faker_locale        = "en_US"
  app_maintenance_driver  = "file"
  php_cli_server_workers  = 4
  bcrypt_rounds          = 12

  # Database Configuration (non-sensitive)
  db_connection = "mysql"

  # Logging Configuration
  log_channel             = "stack"
  log_stack              = "single"
  log_deprecations_channel = "null"
  log_level              = "error"  # Use "debug" for dev, "error" for production

  # Session Configuration
  session_driver   = "database"
  session_lifetime = 120
  session_encrypt  = false
  session_path     = "/"
  session_domain   = "null"

  # Cache and Queue Configuration
  broadcast_connection = "log"
  filesystem_disk     = "s3"
  queue_connection    = "database"
  cache_store        = "database"
  cache_prefix       = ""

  # Redis Configuration
  redis_client = "phpredis"
  redis_host   = "127.0.0.1"  # Will be overridden if using ElastiCache
  redis_port   = 6379

  # Mail Configuration (non-sensitive)
  mail_mailer       = "smtp"
  mail_scheme       = "null"
  mail_host         = "127.0.0.1"  # Your SMTP server host
  mail_port         = 587
  mail_from_address = "hello@rentpath.com"
  mail_from_name    = "RentPath"

  # AWS Configuration (non-sensitive)
  aws_default_region           = "eu-central-1"
  aws_use_path_style_endpoint = false
}

# ==============================================================================
# ENVIRONMENT-SPECIFIC EXAMPLES:
# ==============================================================================

# DEVELOPMENT ENVIRONMENT:
# environment = "dev"
# eb_instance_type = "t3.micro"
# eb_max_size = 2
# rds_instance_class = "db.t3.micro"
# rds_multi_az = false
# rds_deletion_protection = false
# app_debug = "true"
# eb_laravel_config = {
#   app_env = "development"
#   log_level = "debug"
#   # ... other dev-specific overrides
# }

# STAGING ENVIRONMENT:
# environment = "staging"
# eb_instance_type = "t3.small"
# eb_max_size = 3
# rds_instance_class = "db.t3.small"
# rds_multi_az = false
# rds_deletion_protection = true
# eb_laravel_config = {
#   app_env = "staging"
#   log_level = "info"
#   # ... other staging-specific overrides
# }

# PRODUCTION ENVIRONMENT:
# environment = "production"
# eb_instance_type = "t3.medium"
# eb_max_size = 10
# rds_instance_class = "db.t3.small"
# rds_multi_az = true
# rds_deletion_protection = true
# db_allocated_storage = 50
# db_max_allocated_storage = 500
# eb_laravel_config = {
#   app_env = "production"
#   log_level = "error"
#   # ... other production-specific overrides
# }

# NOTE: When overriding eb_laravel_config for different environments,
# you only need to specify the values that differ from the defaults above.
# Terraform will merge your overrides with the default values.
