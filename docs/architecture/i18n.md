# Internationalization (i18n)

RentPath supports 4 languages using a **server-side translation** approach with a **route-based organization**.

## Supported Languages

| Code | Language   | Directory            |
| ---- | ---------- | -------------------- |
| `en` | English    | `resources/lang/en/` |
| `fr` | Francais   | `resources/lang/fr/` |
| `de` | Deutsch    | `resources/lang/de/` |
| `nl` | Nederlands | `resources/lang/nl/` |

## Architecture

```
Backend (Laravel)
├─ resources/lang/{locale}/           # Route-based translation structure
│   ├── common.php                    # Shared UI strings
│   ├── statuses.php                  # Status labels
│   ├── settings.php                  # Settings page
│   ├── auth/                         # Auth pages
│   ├── manager/                      # Manager portal
│   ├── tenant/                       # Tenant portal
│   ├── public/                       # Public pages
│   ├── layout/                       # Layout components
│   └── wizard/                       # Wizard translations
├─ SetLocale Middleware               # Reads locale from session/browser
└─ HandleInertiaRequests Middleware   # Passes translations as shared props
         ↓
Frontend (React/TypeScript)
├─ usePage<SharedData>().props.translations
├─ translate(translations.domain.file, 'key.path')
└─ TypeScript types (resources/js/types/translations/)
```

## Directory Structure

Translations are organized by **route/domain**:

```
resources/lang/en/
├── common.php                    # Shared UI (buttons, labels, empty states)
├── statuses.php                  # Application/property/lead status labels
├── settings.php                  # Settings page
├── auth/                         # Auth pages
│   ├── common.php                # Shared auth strings
│   ├── login.php                 # Login page
│   ├── register.php              # Registration page
│   └── forgot-password.php       # Password reset
├── manager/                      # Manager portal
│   ├── properties.php            # Property management
│   ├── applications.php          # Application review
│   ├── leads.php                 # Lead tracking
│   └── profile.php               # Manager profile
├── tenant/                       # Tenant portal
│   ├── common.php                # Shared tenant strings (nav, etc.)
│   ├── dashboard.php             # Tenant dashboard
│   ├── applications.php          # Tenant applications
│   ├── profile.php               # Tenant profile
│   └── properties.php            # Property browsing
├── public/                       # Public pages
│   ├── landing.php               # Marketing landing page
│   ├── contact-us.php            # Contact page
│   ├── privacy-policy.php        # Privacy policy
│   └── terms-of-use.php          # Terms of use
├── layout/                       # Layout components
│   ├── header.php                # Navigation header
│   ├── sidebar.php               # Sidebar navigation
│   └── cookie-banner.php         # Cookie consent
└── wizard/                       # Wizard translations
    ├── common.php                # Shared wizard UI
    ├── property.php              # Property wizard steps
    └── application.php           # Application wizard steps
```

## HandleInertiaRequests Structure

The middleware loads translations in a nested structure matching the directory layout:

```php
// app/Http/Middleware/HandleInertiaRequests.php
'translations' => [
    'common' => trans('common'),
    'statuses' => trans('statuses'),
    'settings' => trans('settings'),
    'auth' => [
        'common' => trans('auth/common'),
        'login' => trans('auth/login'),
        'register' => trans('auth/register'),
        'forgotPassword' => trans('auth/forgot-password'),
    ],
    'manager' => [
        'properties' => trans('manager/properties'),
        'applications' => trans('manager/applications'),
        'leads' => trans('manager/leads'),
        'profile' => trans('manager/profile'),
    ],
    'tenant' => [
        'common' => trans('tenant/common'),
        'dashboard' => trans('tenant/dashboard'),
        'applications' => trans('tenant/applications'),
        'profile' => trans('tenant/profile'),
        'properties' => trans('tenant/properties'),
    ],
    'public' => [
        'landing' => trans('public/landing'),
        'contactUs' => trans('public/contact-us'),
        'privacyPolicy' => trans('public/privacy-policy'),
        'termsOfUse' => trans('public/terms-of-use'),
    ],
    'layout' => [
        'header' => trans('layout/header'),
        'sidebar' => trans('layout/sidebar'),
        'cookieBanner' => trans('layout/cookie-banner'),
    ],
    'wizard' => [
        'common' => trans('wizard/common'),
        'property' => trans('wizard/property'),
        'application' => trans('wizard/application'),
    ],
],
```

## Usage in Components

### Pattern: Create a scoped translate helper

```tsx
import { usePage } from '@inertiajs/react';
import { translate } from '@/utils/translate-utils';
import type { SharedData } from '@/types';

export function PropertySidebar() {
    const { translations } = usePage<SharedData>().props;
    // Scope to the specific translation file
    const t = (key: string, params?: Record<string, string | number>) => translate(translations.manager.properties, key, params);

    return (
        <div>
            <h3>{t('sidebar.quickStats')}</h3>
            <p>{t('sidebar.usedTimes', { count: 5 })}</p>
        </div>
    );
}
```

### Pattern: Access nested keys

```tsx
// For deeply nested translations
const t = (key: string) => translate(translations.manager.properties.sidebar, key);

// Usage
<span>{t('monthlyRent')}</span>;
```

### Pattern: Multiple translation files in one component

```tsx
export function Header() {
    const { translations } = usePage<SharedData>().props;

    // Multiple scoped helpers
    const tHeader = (key: string) => translate(translations.layout.header, key);
    const tCommon = (key: string) => translate(translations.common, key);

    return (
        <header>
            <nav>{tHeader('nav.properties')}</nav>
            <button>{tCommon('logout')}</button>
        </header>
    );
}
```

## Key Naming Conventions

**Always use camelCase for translation keys:**

```php
// GOOD
'pageTitle' => 'Privacy Policy',
'sections' => [
    'whoWeAre' => [
        'title' => 'Who We Are',
        'content' => '...',
    ],
],

// BAD (don't use snake_case)
'page_title' => 'Privacy Policy',
'sections' => [
    'who_we_are' => [...],
],
```

## Adding New Translations

1. **Add PHP file** in the appropriate subdirectory for all 4 locales
2. **Create TypeScript interface** in `resources/js/types/translations/`
3. **Update `Translations` interface** in `index.d.ts`
4. **Register in HandleInertiaRequests** middleware
5. **Use in components** via scoped `translate()` helper

### Example: Adding a new page

```bash
# 1. Create translation files
touch resources/lang/en/tenant/messages.php
touch resources/lang/de/tenant/messages.php
touch resources/lang/fr/tenant/messages.php
touch resources/lang/nl/tenant/messages.php
```

```php
// 2. resources/lang/en/tenant/messages.php
<?php

return [
    'title' => 'Messages',
    'emptyState' => 'No messages yet',
    'sendMessage' => 'Send Message',
];
```

```php
// 3. Update HandleInertiaRequests.php
'tenant' => [
    // ... existing
    'messages' => trans('tenant/messages'),
],
```

```tsx
// 4. Use in component
const { translations } = usePage<SharedData>().props;
const t = (key: string) => translate(translations.tenant.messages, key);
```

## TypeScript Types

Translation types are defined in `resources/js/types/translations/`:

```typescript
// resources/js/types/translations/index.d.ts
export interface Translations {
    common: CommonTranslations;
    statuses: StatusesTranslations;
    settings: SettingsTranslations;
    auth: {
        common: AuthCommonTranslations;
        login: AuthLoginTranslations;
        register: AuthRegisterTranslations;
        forgotPassword: AuthForgotPasswordTranslations;
    };
    manager: {
        properties: ManagerPropertiesTranslations;
        applications: ManagerApplicationsTranslations;
        leads: ManagerLeadsTranslations;
        profile: ManagerProfileTranslations;
    };
    // ... etc
}
```

## Debugging Missing Translations

If you see raw translation keys like `sidebar.quickStats` instead of text:

1. **Check the translation file exists** in `resources/lang/{locale}/`
2. **Verify the key exists** in the PHP array with correct camelCase
3. **Confirm HandleInertiaRequests** loads the file
4. **Ensure the component** uses the correct namespace: `translations.manager.properties` not `translations`
